{% extends "layout.html" %}

{% block head %}Hello{% endblock%}

{% block body %}
<form action="{{ url_for('add_message') }}" method="POST">
    <textarea id="message" name="message" rows="4" cols="50"></textarea><br>
    <input type="submit" value="Submit">
</form>
<form method="POST" action="/upload" enctype="multipart/form-data">
    <input type="file" name="file">
    <input type="submit" value="Upload">
</form>

<ul>
    {% for item in items %}
    <li>
        {% if item.type == 'message' %}
        {{ item.message|urlize }} ({{ item.timestamp }})
        <button onclick="copyToClipboard('{{ item.message }}')">Copy</button>
        <form method="POST" action="{{ url_for('delete_message', id=item.id) }}" style="display:inline;">
            <input type="hidden" name="id" value="{{ item.id }}">
            <button type="submit">Delete</button>
        </form>
        {% else %}
        <img src="{{ url_for('download_file', filename=item.name) }}" width="50px" alt="Image">
        {{ item.name }} ({{ item.timestamp }})
        <form method="GET" action="{{ url_for('download_file', filename=item.name) }}" style="display:inline;">
            <button type="submit">Download</button>
        </form>
        <form method="POST" action="{{ url_for('delete_file', id=item.id) }}" style="display:inline;">
            <input type="hidden" name="id" value="{{ item.id }}">
            <button type="submit">Delete</button>
        </form>
        {% endif %}
    </li>
    {% endfor %}
</ul>
<script>
    function copyToClipboard(text) {
        var tempInput = document.createElement('input');
        tempInput.value = text;
        document.body.appendChild(tempInput);
        tempInput.select();
        document.execCommand('copy');
        document.body.removeChild(tempInput);
    }
</script>



{% endblock %}